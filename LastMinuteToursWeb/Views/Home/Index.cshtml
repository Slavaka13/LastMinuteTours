@using LastMinuteTours.Entities
@using LastMinuteToursWeb.Models

@model TourIndexViewModel

@{
    ViewData["Title"] = "Общая статистика";
}

<h2>Общая статистика</h2>

<div style="margin-bottom: 10px;">
    <a asp-action="Create" class="btn btn-primary">Добавить</a>
    <a asp-action="Index" class="btn btn-light">Обновить</a>
</div>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Направление</th>
            <th>Дата вылета</th>
            <th>Количество ночей</th>
            <th>Стоимость за отдыхающего (руб)</th>
            <th>Количество отдыхающих</th>
            <th>Наличие Wi-Fi</th>
            <th>Доплаты (руб)</th>
            <th>Общая стоимость</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var tour in Model.Tours)
        {
            <tr>
                <td>@tour.Direction</td>
                <td>@tour.DepartureDate.ToShortDateString()</td>
                <td>@tour.NumberNights</td>
                <td>@tour.CostPerVacationer.ToString("N2")</td>
                <td>@tour.NumberVacationers</td>
                <td>@(tour.AvailabilityWiFi ? "Да" : "Нет")</td>
                <td>@tour.Surcharges.ToString("N2")</td>
                <td>@((tour.CostPerVacationer * tour.NumberVacationers + tour.Surcharges).ToString("N2"))</td>
                <td class="text-center">
                    <a asp-action="Edit"
                       asp-route-id="@tour.Id"
                       class="btn btn-sm btn-secondary mb-1">
                        Редактировать
                    </a>

                    <a asp-action="Delete"
                       asp-route-id="@tour.Id"
                       class="btn btn-sm btn-danger">
                        Удалить
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

<hr />

<div>
    <strong>Общее кол-во туров:</strong> @Model.Statistics.TotalTours |
    <strong>Общая сумма за все туры:</strong> @Model.Statistics.TotalCost.ToString("N2") руб. |
    <strong>Кол-во туров с доплатами:</strong> @Model.Statistics.ToursWithSurcharges |
    <strong>Общая сумма доплат:</strong> @Model.Statistics.TotalSurcharges.ToString("N2") руб.
</div>
